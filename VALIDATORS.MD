# Validators Documentation

Este documento descreve todas as valida√ß√µes implementadas no backend para cada entidade do sistema. Use este guia para implementar valida√ß√µes no frontend e garantir consist√™ncia entre as camadas.

---

## üìã √çndice

1. [Hospital](#hospital)
2. [User](#user)
3. [Job Title](#job-title)
4. [Category](#category)
5. [SubCategory](#subcategory)
6. [Catalog](#catalog)

---

## üè• Hospital

### Campo: `name`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), n√∫meros (0-9), espa√ßos, `&`, `.`, `/`, `(`, `)`, `-`
- **Mensagens de erro**:
  - `"Name must be at least 2 characters long"`
  - `"Name must be less than 200 characters"`
  - `"Name must contain only letters, numbers, spaces and basic punctuation (&./()-)"`

### Campo: `nationality`
- **Obrigat√≥rio**: Sim
- **Tipo**: String (Enum)
- **Valores aceitos** (Pa√≠ses do Mercosul e associados):
  - `Brasileira`
  - `Argentina`
  - `Paraguaia`
  - `Uruguaia`
  - `Boliviana`
  - `Chilena`
- **Mensagem de erro**:
  - `"Nationality must be one of: Brasileira, Argentina, Paraguaia, Uruguaia, Boliviana, Chilena"`

### Campo: `document_type`
- **Obrigat√≥rio**: Sim
- **Tipo**: String (Enum)
- **Valores aceitos** (Documentos de empresas do Mercosul):
  - `CNPJ` - Brasil (Cadastro Nacional da Pessoa Jur√≠dica)
  - `CUIT` - Argentina (Clave √önica de Identificaci√≥n Tributaria)
  - `RUC` - Paraguai (Registro √önico del Contribuyente)
  - `RUT` - Chile/Uruguai (Rol √önico Tributario)
  - `NIT` - Bol√≠via (N√∫mero de Identificaci√≥n Tributaria)
  - `OTHER` - Outros tipos
- **Mensagem de erro**:
  - `"Document type must be one of: CNPJ, CUIT, RUC, RUT, NIT, OTHER"`

### Campo: `document`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras gerais**:
  - M√≠nimo: 5 caracteres
  - M√°ximo: 30 caracteres
- **Regras espec√≠ficas por tipo**:

  **CNPJ** (Brasil):
  - Exatamente 14 d√≠gitos (ap√≥s remover caracteres especiais)
  - N√£o pode ter todos os d√≠gitos iguais
  - Formato aceito: `XX.XXX.XXX/XXXX-XX` ou apenas n√∫meros

  **CUIT** (Argentina):
  - Exatamente 11 d√≠gitos (ap√≥s remover caracteres especiais)
  - N√£o pode ter todos os d√≠gitos iguais
  - Formato aceito: `XX-XXXXXXXX-X` ou apenas n√∫meros

  **RUC** (Paraguai):
  - Entre 6 e 9 d√≠gitos

  **RUT** (Chile/Uruguai):
  - Entre 8 e 9 caracteres
  - Pode conter a letra K no final

  **NIT** (Bol√≠via):
  - Entre 7 e 10 d√≠gitos

  **Outros tipos**:
  - Caracteres permitidos: Letras, n√∫meros, h√≠fens, pontos, barras
- **Mensagens de erro**:
  - `"Document must be at least 5 characters long"`
  - `"Document must be less than 30 characters"`
  - `"CNPJ must have exactly 14 digits"`
  - `"CNPJ cannot have all digits the same"`
  - `"CUIT must have exactly 11 digits"`
  - `"CUIT cannot have all digits the same"`
  - `"RUC must have between 6 and 9 digits"`
  - `"RUT must have between 8 and 9 characters"`
  - `"NIT must have between 7 and 10 digits"`
  - `"Document must contain only letters, numbers, hyphens, dots and slashes"`

### Campo: `email`
- **Obrigat√≥rio**: Sim
- **Tipo**: Email
- **Regras**:
  - M√≠nimo: 5 caracteres
  - M√°ximo: 100 caracteres
  - Deve ser um email v√°lido (formato: `usuario@dominio.com`)
- **Mensagens de erro**:
  - `"Email must be at least 5 characters long"`
  - `"Email must be less than 100 characters"`
  - `"Email must be a valid email address"`

### Campo: `phone`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 8 caracteres
  - M√°ximo: 20 caracteres
  - Formato flex√≠vel: aceita n√∫meros, espa√ßos, h√≠fens, par√™nteses, pontos, `+`
  - Padr√£o aceito: `^[\+]?[\d\s\-\(\)\.]{8,20}$`
- **Mensagens de erro**:
  - `"Phone must be at least 8 characters long"`
  - `"Phone must be less than 20 characters"`
  - `"Phone must be a valid phone number"`

### Campo: `city`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), espa√ßos, h√≠fens, ap√≥strofos, pontos
- **Mensagens de erro**:
  - `"City must be at least 2 characters long"`
  - `"City must be less than 100 characters"`
  - `"City must contain only letters, spaces, hyphens, apostrophes and dots"`

---

## üë§ User

### Campo: `name`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 100 caracteres
  - Caracteres permitidos: Apenas letras (a-z, A-Z, √Ä-√ø) e espa√ßos
- **Mensagens de erro**:
  - `"Name must be at least 2 characters long"`
  - `"Name must be less than 100 characters"`
  - `"Name must contain only letters and spaces"`

### Campo: `email`
- **Obrigat√≥rio**: Sim
- **Tipo**: Email
- **Regras**:
  - Deve ser um email v√°lido
  - Dom√≠nio deve ter pelo menos um ponto (ex: `user@example.com`)
- **Mensagem de erro**:
  - `"Invalid email domain format"`

### Campo: `phone`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 8 caracteres
  - M√°ximo: 20 caracteres
  - Formato flex√≠vel: aceita n√∫meros, espa√ßos, h√≠fens, par√™nteses, pontos, `+`
  - Padr√£o: `^[\+]?[\d\s\-\(\)\.]{8,20}$`
- **Mensagens de erro**:
  - `"Phone must be at least 8 characters long"`
  - `"Phone must be less than 20 characters"`
  - `"Phone must be a valid phone number"`

### Campo: `password`
- **Obrigat√≥rio**: Sim (apenas na cria√ß√£o)
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 8 caracteres
  - M√°ximo: 128 caracteres
  - Deve conter pelo menos:
    - Uma letra mai√∫scula (A-Z)
    - Uma letra min√∫scula (a-z)
    - Um n√∫mero (0-9)
    - Um caractere especial (`!@#$%^&*(),.?":{}|<>`)
- **Mensagens de erro**:
  - `"Password must be at least 8 characters long"`
  - `"Password must be less than 128 characters"`
  - `"Password must contain at least one uppercase letter"`
  - `"Password must contain at least one lowercase letter"`
  - `"Password must contain at least one number"`
  - `"Password must contain at least one special character"`

---

## üíº Job Title

### Campo: `title`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), n√∫meros (0-9), espa√ßos, `&`, `.`, `/`, `(`, `)`, `-`
- **Mensagens de erro**:
  - `"Title must be at least 2 characters long"`
  - `"Title must be less than 100 characters"`
  - `"Title must contain only letters, numbers, spaces and basic punctuation (&./()-)"`

---

## üìÅ Category

### Campo: `name`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), n√∫meros (0-9), espa√ßos, `-`, `&`, `(`, `)`, `.`
- **Mensagens de erro**:
  - `"Category name must be at least 2 characters long"`
  - `"Category name must be less than 100 characters"`
  - `"Category name must contain only letters, numbers, spaces, hyphens, ampersands, and parentheses"`

### Campo: `description`
- **Obrigat√≥rio**: N√£o
- **Tipo**: String
- **Regras**:
  - M√°ximo: 500 caracteres
- **Mensagem de erro**:
  - `"Category description must be less than 500 characters"`

---

## üìÇ SubCategory

### Campo: `name`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), n√∫meros (0-9), espa√ßos, `-`, `&`, `(`, `)`, `.`
- **Mensagens de erro**:
  - `"SubCategory name must be at least 2 characters long"`
  - `"SubCategory name must be less than 100 characters"`
  - `"SubCategory name must contain only letters, numbers, spaces, hyphens, ampersands, and parentheses"`

### Campo: `description`
- **Obrigat√≥rio**: N√£o
- **Tipo**: String
- **Regras**:
  - M√°ximo: 500 caracteres
- **Mensagem de erro**:
  - `"SubCategory description must be less than 500 characters"`

### Campo: `category_id`
- **Obrigat√≥rio**: Sim
- **Tipo**: UUID
- **Regras**:
  - Deve ser um UUID v√°lido
  - A categoria referenciada deve existir no sistema
- **Mensagem de erro**:
  - `"Category ID is required"`
  - `"Category with ID '{id}' not found"` (verificado no service)

---

## üìö Catalog

### Campo: `name`
- **Obrigat√≥rio**: Sim
- **Tipo**: String
- **Regras**:
  - M√≠nimo: 2 caracteres
  - M√°ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, √Ä-√ø), n√∫meros (0-9), espa√ßos, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `+`
- **Mensagens de erro**:
  - `"Catalog name must be at least 2 characters long"`
  - `"Catalog name must be less than 200 characters"`
  - `"Catalog name contains invalid characters"`

### Campo: `description`
- **Obrigat√≥rio**: N√£o
- **Tipo**: String
- **Regras**:
  - M√°ximo: 500 caracteres
- **Mensagem de erro**:
  - `"Catalog description must be less than 500 characters"`

### Campo: `full_description`
- **Obrigat√≥rio**: N√£o
- **Tipo**: Text
- **Regras**:
  - M√°ximo: 2000 caracteres
- **Mensagem de erro**:
  - `"Catalog full description must be less than 2000 characters"`

### Campo: `presentation`
- **Obrigat√≥rio**: N√£o
- **Tipo**: String
- **Regras**:
  - M√°ximo: 100 caracteres
- **Mensagem de erro**:
  - `"Catalog presentation must be less than 100 characters"`

---

## üîÑ Valida√ß√µes Adicionais (Service Layer)

Al√©m das valida√ß√µes de formato, o backend tamb√©m verifica **regras de neg√≥cio** na camada de servi√ßo:

### Unicidade (Duplicatas)

As seguintes entidades verificam se j√° existe um registro com o mesmo valor:

**Hospital**:
- `name`: Nome √∫nico
- `document`: Documento √∫nico
- `email`: Email √∫nico
- `phone`: Telefone √∫nico

**User**:
- `email`: Email √∫nico
- `phone`: Telefone √∫nico

**Job Title**:
- `title`: T√≠tulo √∫nico

**Category**:
- `name`: Nome √∫nico

**SubCategory**:
- `name`: Nome √∫nico

**Catalog**:
- `name`: Nome √∫nico

### Exist√™ncia de Relacionamentos

**User**:
- `role_id`: Role deve existir
- `job_title_id`: JobTitle deve existir (se fornecido)
- `hospital_id`: Hospital deve existir (se fornecido)

**SubCategory**:
- `category_id`: Category deve existir

---

## üåé Documentos por Pa√≠s

### Brasil üáßüá∑
**Pessoas**:
- CPF (11 d√≠gitos)
- RG (7-10 caracteres)
- CNH (11 d√≠gitos)

**Empresas**:
- CNPJ (14 d√≠gitos)

### Argentina üá¶üá∑
**Pessoas**:
- DNI (7-8 d√≠gitos)
- CUIL (11 d√≠gitos)

**Empresas**:
- CUIT (11 d√≠gitos)

### Paraguai üáµüáæ
**Pessoas**:
- CI (6-9 d√≠gitos)

**Empresas**:
- RUC (6-9 d√≠gitos)

### Uruguai üá∫üáæ
**Pessoas**:
- CI (6-9 d√≠gitos)

**Empresas**:
- RUT (8-9 caracteres)

### Chile üá®üá±
**Pessoas**:
- RUT (8-9 caracteres, pode ter K)

**Empresas**:
- RUT (8-9 caracteres, pode ter K)

### Bol√≠via üáßüá¥
**Pessoas**:
- CI (6-9 d√≠gitos)

**Empresas**:
- NIT (7-10 d√≠gitos)

---

**√öltima atualiza√ß√£o**: 2025-10-11
**Vers√£o do Backend**: 1.0.0
**Regi√£o**: Mercosul (Brasil, Argentina, Paraguai, Uruguai, Chile, Bol√≠via)
