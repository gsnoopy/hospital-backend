# Validators Documentation

Este documento descreve todas as valida칞칫es implementadas no backend para cada entidade do sistema. Use este guia para implementar valida칞칫es no frontend e garantir consist칡ncia entre as camadas.

---

## 游늶 칈ndice

1. [Hospital](#hospital)
2. [User](#user)
3. [Job Title](#job-title)
4. [Category](#category)
5. [SubCategory](#subcategory)
6. [Catalog](#catalog)
7. [Item](#item)
8. [Supplier](#supplier)
9. [Public Acquisition](#public-acquisition)

---

## 游낀 Hospital

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `&`, `.`, `/`, `(`, `)`, `-`
- **Mensagens de erro**:
  - `"Name must be at least 2 characters long"`
  - `"Name must be less than 200 characters"`
  - `"Name must contain only letters, numbers, spaces and basic punctuation (&./()-)"`

### Campo: `nationality`
- **Obrigat칩rio**: Sim
- **Tipo**: String (Enum)
- **Valores aceitos** (Pa칤ses do Mercosul e associados):
  - `Brasileira`
  - `Argentina`
  - `Paraguaia`
  - `Uruguaia`
  - `Boliviana`
  - `Chilena`
- **Mensagem de erro**:
  - `"Nationality must be one of: Brasileira, Argentina, Paraguaia, Uruguaia, Boliviana, Chilena"`

### Campo: `document_type`
- **Obrigat칩rio**: Sim
- **Tipo**: String (Enum)
- **Valores aceitos** (Documentos de empresas do Mercosul):
  - `CNPJ` - Brasil (Cadastro Nacional da Pessoa Jur칤dica)
  - `CUIT` - Argentina (Clave 칔nica de Identificaci칩n Tributaria)
  - `RUC` - Paraguai (Registro 칔nico del Contribuyente)
  - `RUT` - Chile/Uruguai (Rol 칔nico Tributario)
  - `NIT` - Bol칤via (N칰mero de Identificaci칩n Tributaria)
  - `OTHER` - Outros tipos
- **Mensagem de erro**:
  - `"Document type must be one of: CNPJ, CUIT, RUC, RUT, NIT, OTHER"`

### Campo: `document`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras gerais**:
  - M칤nimo: 5 caracteres
  - M치ximo: 30 caracteres
- **Regras espec칤ficas por tipo**:

  **CNPJ** (Brasil):
  - Exatamente 14 d칤gitos (ap칩s remover caracteres especiais)
  - N칚o pode ter todos os d칤gitos iguais
  - Formato aceito: `XX.XXX.XXX/XXXX-XX` ou apenas n칰meros

  **CUIT** (Argentina):
  - Exatamente 11 d칤gitos (ap칩s remover caracteres especiais)
  - N칚o pode ter todos os d칤gitos iguais
  - Formato aceito: `XX-XXXXXXXX-X` ou apenas n칰meros

  **RUC** (Paraguai):
  - Entre 6 e 9 d칤gitos

  **RUT** (Chile/Uruguai):
  - Entre 8 e 9 caracteres
  - Pode conter a letra K no final

  **NIT** (Bol칤via):
  - Entre 7 e 10 d칤gitos

  **Outros tipos**:
  - Caracteres permitidos: Letras, n칰meros, h칤fens, pontos, barras
- **Mensagens de erro**:
  - `"Document must be at least 5 characters long"`
  - `"Document must be less than 30 characters"`
  - `"CNPJ must have exactly 14 digits"`
  - `"CNPJ cannot have all digits the same"`
  - `"CUIT must have exactly 11 digits"`
  - `"CUIT cannot have all digits the same"`
  - `"RUC must have between 6 and 9 digits"`
  - `"RUT must have between 8 and 9 characters"`
  - `"NIT must have between 7 and 10 digits"`
  - `"Document must contain only letters, numbers, hyphens, dots and slashes"`

### Campo: `email`
- **Obrigat칩rio**: Sim
- **Tipo**: Email
- **Regras**:
  - M칤nimo: 5 caracteres
  - M치ximo: 100 caracteres
  - Deve ser um email v치lido (formato: `usuario@dominio.com`)
- **Mensagens de erro**:
  - `"Email must be at least 5 characters long"`
  - `"Email must be less than 100 characters"`
  - `"Email must be a valid email address"`

### Campo: `phone`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 8 caracteres
  - M치ximo: 20 caracteres
  - Formato flex칤vel: aceita n칰meros, espa칞os, h칤fens, par칡nteses, pontos, `+`
  - Padr칚o aceito: `^[\+]?[\d\s\-\(\)\.]{8,20}$`
- **Mensagens de erro**:
  - `"Phone must be at least 8 characters long"`
  - `"Phone must be less than 20 characters"`
  - `"Phone must be a valid phone number"`

### Campo: `city`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), espa칞os, h칤fens, ap칩strofos, pontos
- **Mensagens de erro**:
  - `"City must be at least 2 characters long"`
  - `"City must be less than 100 characters"`
  - `"City must contain only letters, spaces, hyphens, apostrophes and dots"`

---

## 游녻 User

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Apenas letras (a-z, A-Z, -) e espa칞os
- **Mensagens de erro**:
  - `"Name must be at least 2 characters long"`
  - `"Name must be less than 100 characters"`
  - `"Name must contain only letters and spaces"`

### Campo: `email`
- **Obrigat칩rio**: Sim
- **Tipo**: Email
- **Regras**:
  - Deve ser um email v치lido
  - Dom칤nio deve ter pelo menos um ponto (ex: `user@example.com`)
- **Mensagem de erro**:
  - `"Invalid email domain format"`

### Campo: `phone`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 8 caracteres
  - M치ximo: 20 caracteres
  - Formato flex칤vel: aceita n칰meros, espa칞os, h칤fens, par칡nteses, pontos, `+`
  - Padr칚o: `^[\+]?[\d\s\-\(\)\.]{8,20}$`
- **Mensagens de erro**:
  - `"Phone must be at least 8 characters long"`
  - `"Phone must be less than 20 characters"`
  - `"Phone must be a valid phone number"`

### Campo: `password`
- **Obrigat칩rio**: Sim (apenas na cria칞칚o)
- **Tipo**: String
- **Regras**:
  - M칤nimo: 8 caracteres
  - M치ximo: 128 caracteres
  - Deve conter pelo menos:
    - Uma letra mai칰scula (A-Z)
    - Uma letra min칰scula (a-z)
    - Um n칰mero (0-9)
    - Um caractere especial (`!@#$%^&*(),.?":{}|<>`)
- **Mensagens de erro**:
  - `"Password must be at least 8 characters long"`
  - `"Password must be less than 128 characters"`
  - `"Password must contain at least one uppercase letter"`
  - `"Password must contain at least one lowercase letter"`
  - `"Password must contain at least one number"`
  - `"Password must contain at least one special character"`

---

## 游눺 Job Title

### Campo: `title`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `&`, `.`, `/`, `(`, `)`, `-`
- **Mensagens de erro**:
  - `"Title must be at least 2 characters long"`
  - `"Title must be less than 100 characters"`
  - `"Title must contain only letters, numbers, spaces and basic punctuation (&./()-)"`

---

## 游늬 Category

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`
- **Mensagens de erro**:
  - `"Category name must be at least 2 characters long"`
  - `"Category name must be less than 100 characters"`
  - `"Category name must contain only letters, numbers, spaces, hyphens, ampersands, and parentheses"`

### Campo: `description`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 500 caracteres
- **Mensagem de erro**:
  - `"Category description must be less than 500 characters"`

---

## 游늭 SubCategory

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`
- **Mensagens de erro**:
  - `"SubCategory name must be at least 2 characters long"`
  - `"SubCategory name must be less than 100 characters"`
  - `"SubCategory name must contain only letters, numbers, spaces, hyphens, ampersands, and parentheses"`

### Campo: `description`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 500 caracteres
- **Mensagem de erro**:
  - `"SubCategory description must be less than 500 characters"`

### Campo: `category_id`
- **Obrigat칩rio**: Sim
- **Tipo**: UUID
- **Regras**:
  - Deve ser um UUID v치lido
  - A categoria referenciada deve existir no sistema
- **Mensagem de erro**:
  - `"Category ID is required"`
  - `"Category with ID '{id}' not found"` (verificado no service)

---

## 游닄 Catalog

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `+`
- **Mensagens de erro**:
  - `"Catalog name must be at least 2 characters long"`
  - `"Catalog name must be less than 200 characters"`
  - `"Catalog name contains invalid characters"`

### Campo: `description`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 500 caracteres
- **Mensagem de erro**:
  - `"Catalog description must be less than 500 characters"`

### Campo: `full_description`
- **Obrigat칩rio**: N칚o
- **Tipo**: Text
- **Regras**:
  - M치ximo: 2000 caracteres
- **Mensagem de erro**:
  - `"Catalog full description must be less than 2000 characters"`

### Campo: `presentation`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 100 caracteres
- **Mensagem de erro**:
  - `"Catalog presentation must be less than 100 characters"`

### Campo: `similar_names`
- **Obrigat칩rio**: N칚o
- **Tipo**: Array de Strings
- **Regras**:
  - M치ximo: 20 itens no array
  - Cada item deve ter:
    - M칤nimo: 2 caracteres
    - M치ximo: 200 caracteres
    - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `+`
- **Mensagens de erro**:
  - `"Similar names must be a list"`
  - `"Similar names list must have at most 20 items"`
  - `"Similar name at index {idx} must be a string"`
  - `"Similar name at index {idx} must be at least 2 characters"`
  - `"Similar name at index {idx} must be less than 200 characters"`
  - `"Similar name at index {idx} contains invalid characters"`

---

## 游닍 Item

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `+`
- **Mensagens de erro**:
  - `"Item name must be at least 2 characters long"`
  - `"Item name must be less than 200 characters"`
  - `"Item name contains invalid characters"`

### Campo: `similar_names`
- **Obrigat칩rio**: N칚o
- **Tipo**: Array de Strings
- **Regras**:
  - M치ximo: 20 itens no array
  - Cada item deve ter:
    - M칤nimo: 2 caracteres
    - M치ximo: 200 caracteres
    - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `+`
- **Mensagens de erro**:
  - `"Similar names must be a list"`
  - `"Similar names list must have at most 20 items"`
  - `"Similar name at index {idx} must be a string"`
  - `"Similar name at index {idx} must be at least 2 characters"`
  - `"Similar name at index {idx} must be less than 200 characters"`
  - `"Similar name at index {idx} contains invalid characters"`

### Campo: `description`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 500 caracteres
- **Mensagem de erro**:
  - `"Item description must be less than 500 characters"`

### Campo: `full_description`
- **Obrigat칩rio**: N칚o
- **Tipo**: Text
- **Regras**:
  - M치ximo: 2000 caracteres
- **Mensagem de erro**:
  - `"Item full description must be less than 2000 characters"`

### Campo: `internal_code`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 50 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z), n칰meros (0-9), h칤fens (`-`), underscores (`_`)
- **Mensagens de erro**:
  - `"Internal code must be less than 50 characters"`
  - `"Internal code must contain only letters, numbers, hyphens and underscores"`

### Campo: `presentation`
- **Obrigat칩rio**: N칚o
- **Tipo**: String
- **Regras**:
  - M치ximo: 100 caracteres
- **Mensagem de erro**:
  - `"Item presentation must be less than 100 characters"`

### Campo: `sample`
- **Obrigat칩rio**: N칚o
- **Tipo**: Integer
- **Regras**:
  - Deve ser um n칰mero positivo (>= 0)
- **Mensagem de erro**:
  - `"Sample quantity must be a positive number"`

### Campo: `has_catalog`
- **Obrigat칩rio**: N칚o
- **Tipo**: Boolean
- **Valor padr칚o**: `false`
- **Regras**:
  - Deve ser `true` ou `false`

### Campo: `subcategory_id`
- **Obrigat칩rio**: Sim
- **Tipo**: UUID
- **Regras**:
  - Deve ser um UUID v치lido
  - A subcategoria referenciada deve existir no sistema
- **Mensagens de erro**:
  - `"SubCategory with ID '{id}' not found"` (verificado no service)

---

## 游낈 Supplier

### Campo: `name`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 200 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`
- **Mensagens de erro**:
  - `"Supplier name must be at least 2 characters long"`
  - `"Supplier name must be less than 200 characters"`
  - `"Supplier name contains invalid characters"`

### Campo: `document_type`
- **Obrigat칩rio**: Sim
- **Tipo**: String (Enum)
- **Valores aceitos**:
  - `CPF` - Brasil (Cadastro de Pessoa F칤sica)
  - `CNPJ` - Brasil (Cadastro Nacional da Pessoa Jur칤dica)
  - `DNI` - Argentina (Documento Nacional de Identidad)
  - `CUIT` - Argentina (Clave 칔nica de Identificaci칩n Tributaria)
  - `CUIL` - Argentina (C칩digo 칔nico de Identificaci칩n Laboral)
  - `CI` - Paraguai (C칠dula de Identidad)
  - `RUC` - Paraguai (Registro 칔nico del Contribuyente)
- **Mensagem de erro**:
  - `"Document type must be one of: CPF, CNPJ, DNI, CUIT, CUIL, CI, RUC"`

### Campo: `document`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras espec칤ficas por tipo**:

  **CPF** (Brasil - Pessoa F칤sica):
  - Exatamente 11 d칤gitos (ap칩s remover caracteres especiais)
  - Formato aceito: `XXX.XXX.XXX-XX` ou apenas n칰meros

  **CNPJ** (Brasil - Pessoa Jur칤dica):
  - Exatamente 14 d칤gitos (ap칩s remover caracteres especiais)
  - Formato aceito: `XX.XXX.XXX/XXXX-XX` ou apenas n칰meros

  **DNI** (Argentina - Pessoa F칤sica):
  - Entre 7 e 8 d칤gitos (ap칩s remover caracteres especiais)

  **CUIT** (Argentina - Pessoa Jur칤dica):
  - Exatamente 11 d칤gitos (ap칩s remover caracteres especiais)
  - Formato aceito: `XX-XXXXXXXX-X` ou apenas n칰meros

  **CUIL** (Argentina - Pessoa F칤sica):
  - Exatamente 11 d칤gitos (ap칩s remover caracteres especiais)
  - Formato aceito: `XX-XXXXXXXX-X` ou apenas n칰meros

  **CI** (Paraguai - Pessoa F칤sica):
  - Entre 6 e 8 d칤gitos (ap칩s remover caracteres especiais)

  **RUC** (Paraguai - Pessoa Jur칤dica):
  - Entre 6 e 9 d칤gitos (ap칩s remover caracteres especiais)

- **Mensagens de erro**:
  - `"Document is required"`
  - `"CPF must have 11 digits"`
  - `"CNPJ must have 14 digits"`
  - `"DNI must have 7 or 8 digits"`
  - `"CUIT must have 11 digits"`
  - `"CUIL must have 11 digits"`
  - `"CI must have 6 to 8 digits"`
  - `"RUC must have 6 to 9 digits"`

### Campo: `email`
- **Obrigat칩rio**: Sim
- **Tipo**: Email
- **Regras**:
  - M치ximo: 255 caracteres
  - Deve ser um email v치lido (formato: `usuario@dominio.com`)
- **Mensagens de erro**:
  - `"Email is required"`
  - `"Invalid email format"`
  - `"Email must be less than 255 characters"`

### Campo: `phone`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - Entre 10 e 11 d칤gitos (ap칩s remover caracteres especiais)
  - Aceita celular ou fixo com DDD
- **Mensagens de erro**:
  - `"Phone is required"`
  - `"Phone must have 10 or 11 digits"`

---

## 游늶 Public Acquisition

### Campo: `code`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 2 caracteres
  - M치ximo: 100 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z), n칰meros (0-9), espa칞os, `-`, `/`, `_`
- **Mensagens de erro**:
  - `"Public acquisition code must be at least 2 characters long"`
  - `"Public acquisition code must be less than 100 characters"`
  - `"Public acquisition code contains invalid characters"`

### Campo: `title`
- **Obrigat칩rio**: Sim
- **Tipo**: String
- **Regras**:
  - M칤nimo: 5 caracteres
  - M치ximo: 500 caracteres
  - Caracteres permitidos: Letras (a-z, A-Z, -), n칰meros (0-9), espa칞os, `-`, `&`, `(`, `)`, `.`, `,`, `/`, `:`, `;`, `+`, `#`, `@`
- **Mensagens de erro**:
  - `"Public acquisition title must be at least 5 characters long"`
  - `"Public acquisition title must be less than 500 characters"`
  - `"Public acquisition title contains invalid characters"`

---

## 游댃 Valida칞칫es Adicionais (Service Layer)

Al칠m das valida칞칫es de formato, o backend tamb칠m verifica **regras de neg칩cio** na camada de servi칞o:

### Unicidade (Duplicatas)

As seguintes entidades verificam se j치 existe um registro com o mesmo valor:

**Hospital**:
- `name`: Nome 칰nico
- `document`: Documento 칰nico
- `email`: Email 칰nico
- `phone`: Telefone 칰nico

**User**:
- `email`: Email 칰nico
- `phone`: Telefone 칰nico

**Job Title**:
- `title`: T칤tulo 칰nico

**Category**:
- `name`: Nome 칰nico

**SubCategory**:
- `name`: Nome 칰nico

**Catalog**:
- `name`: Nome 칰nico

**Item**:
- `internal_code`: C칩digo interno 칰nico (se fornecido)

**Supplier**:
- `document`: Documento 칰nico dentro do hospital
- `email`: Email 칰nico dentro do hospital

**Public Acquisition**:
- `code`: C칩digo 칰nico dentro do hospital

### Exist칡ncia de Relacionamentos

**User**:
- `role_id`: Role deve existir
- `job_title_id`: JobTitle deve existir (se fornecido)
- `hospital_id`: Hospital deve existir (se fornecido)

**SubCategory**:
- `category_id`: Category deve existir

**Item**:
- `subcategory_id`: SubCategory deve existir

---

## 游깵 Documentos por Pa칤s

### Brasil 游游
**Pessoas**:
- CPF (11 d칤gitos)
- RG (7-10 caracteres)
- CNH (11 d칤gitos)

**Empresas**:
- CNPJ (14 d칤gitos)

### Argentina 游뷣릖
**Pessoas**:
- DNI (7-8 d칤gitos)
- CUIL (11 d칤gitos)

**Empresas**:
- CUIT (11 d칤gitos)

### Paraguai 游왫릖
**Pessoas**:
- CI (6-9 d칤gitos)

**Empresas**:
- RUC (6-9 d칤gitos)

### Uruguai 游쥟릖
**Pessoas**:
- CI (6-9 d칤gitos)

**Empresas**:
- RUT (8-9 caracteres)

### Chile 游뻟릖
**Pessoas**:
- RUT (8-9 caracteres, pode ter K)

**Empresas**:
- RUT (8-9 caracteres, pode ter K)

### Bol칤via 游游
**Pessoas**:
- CI (6-9 d칤gitos)

**Empresas**:
- NIT (7-10 d칤gitos)

---

**칔ltima atualiza칞칚o**: 2025-10-19
**Vers칚o do Backend**: 1.0.0
**Regi칚o**: Mercosul (Brasil, Argentina, Paraguai, Uruguai, Chile, Bol칤via)
